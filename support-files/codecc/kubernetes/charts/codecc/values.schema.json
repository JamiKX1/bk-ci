{
    "$schema": "http://json-schema.org/schema#",
    "type": "object",
    "properties": {
        "task": {
            "type": "object",
            "form": true,
            "properties": {
                "enabled": {
                    "type": "boolean",
                    "title": "是否部署task服务",
                    "form": true
                }
            }
        },
        "defect": {
            "type": "object",
            "form": true,
            "properties": {
                "enabled": {
                    "type": "boolean",
                    "title": "是否部署defect服务",
                    "form": true
                }
            }
        },
        "report": {
            "type": "object",
            "form": true,
            "properties": {
                "enabled": {
                    "type": "boolean",
                    "title": "是否部署report服务",
                    "form": true
                }
            }
        },
        "asyncreport": {
            "type": "object",
            "form": true,
            "properties": {
                "enabled": {
                    "type": "boolean",
                    "title": "是否部署asyncreport服务",
                    "form": true
                }
            }
        },
        "codeccjob": {
            "type": "object",
            "form": true,
            "properties": {
                "enabled": {
                    "type": "boolean",
                    "title": "是否部署codeccjob服务",
                    "form": true
                }
            }
        },
        "quartz": {
            "type": "object",
            "form": true,
            "properties": {
                "enabled": {
                    "type": "boolean",
                    "title": "是否部署quartz服务",
                    "form": true
                }
            }
        },
        "schedule": {
            "type": "object",
            "form": true,
            "properties": {
                "enabled": {
                    "type": "boolean",
                    "title": "是否部署schedule服务",
                    "form": true
                }
            }
        },
        "gateway": {
            "type": "object",
            "title": "gateway配置",
            "description": "gateway是codecc的服务入口",
            "form": true,
            "properties": {
                "service": {
                    "type": "object",
                    "title": "Service配置",
                    "form": true,
                    "properties": {
                        "type": {
                            "type": "string",
                            "title": "Service类型",
                            "enum": [
                                "ClusterIP",
                                "NodePort",
                                "LoadBalancer"
                            ],
                            "form": true
                        }
                    }
                }
            }
        },
        "config": {
            "type": "object",
            "form": true,
            "title": "配置项",
            "properties": {
                "BK_CODECC_CONSUL_DISCOVERY_TAG":{
                    "form": true,
                    "type": "string",
                    "title": "BK_CODECC_CONSUL_DISCOVERY_TAG",
                    "description": "服务发现时的标签"
                },
                "BK_CI_PUBLIC_URL":{
                    "form": true,
                    "type": "string",
                    "title": "BK_CI_PUBLIC_URL",
                    "description": "CI的公开地址"
                },
                "BK_CI_PRIVATE_URL":{
                    "form": true,
                    "type": "string",
                    "title": "BK_CI_PRIVATE_URL",
                    "description": "CI的集群内地址"
                },
                "BK_CODECC_PUBLIC_URL":{
                    "form": true,
                    "type": "string",
                    "title": "BK_CODECC_PUBLIC_URL",
                    "description": "codecc为集群外访问提供的URL"
                },
                "BK_CODECC_PRIVATE_URL":{
                    "form": true,
                    "type": "string",
                    "title": "BK_CODECC_PRIVATE_URL",
                    "description": "codecc为集群内访问提供的URL"
                },
                "BK_CI_AUTH_PROVIDER":{
                    "form": true,
                    "type": "string",
                    "title": "BK_CI_AUTH_PROVIDER",
                    "enum": [
                        "sample",
                        "bk_login_v3"
                    ],
                    "description": "服务权限校验方式"
                },
                "BK_IAM_PRIVATE_URL":{
                    "form": true,
                    "type": "string",
                    "title": "BK_IAM_PRIVATE_URL"
                },
                "BK_CODECC_APP_CODE":{
                    "form": true,
                    "type": "string",
                    "title": "BK_CODECC_APP_CODE",
                    "description": "CodeCC在蓝鲸体系中的唯一ID"
                },
                "BK_CODECC_APP_TOKEN":{
                    "form": true,
                    "type": "string",
                    "title": "BK_CODECC_APP_TOKEN"
                },
                "BK_PAAS_PRIVATE_URL":{
                    "form": true,
                    "type": "string",
                    "title": "BK_PAAS_PRIVATE_URL"
                },
                "BK_CI_IAM_CALLBACK_USER":{
                    "form": true,
                    "type": "string",
                    "title": "BK_CI_IAM_CALLBACK_USER"
                },
                "BK_CODECC_PIPELINE_IMAGE_NAME":{
                    "form": true,
                    "type": "string",
                    "title": "BK_CODECC_PIPELINE_IMAGE_NAME"
                },
                "BK_CODECC_PIPELINE_BUILD_TYPE":{
                    "form": true,
                    "type": "string",
                    "title": "BK_CODECC_PIPELINE_BUILD_TYPE"
                },
                "BK_CODECC_PIPELINE_IMAGE_TAG":{
                    "form": true,
                    "type": "string",
                    "title": "BK_CODECC_PIPELINE_IMAGE_TAG"
                },
                "BK_CODECC_TASK_ENCRYPTOR_KEY":{
                    "form": true,
                    "type": "string",
                    "title": "BK_CODECC_TASK_ENCRYPTOR_KEY"
                },
                "BK_CODECC_PIPELINE_ATOM_CODE":{
                    "form": true,
                    "type": "string",
                    "title": "BK_CODECC_PIPELINE_ATOM_CODE",
                    "description": "蓝盾流水线中CodeCC插件的AtomCode"
                },
                "BK_CODECC_PIPELINE_ATOM_VERSION":{
                    "form": true,
                    "type": "string",
                    "title": "BK_CODECC_PIPELINE_ATOM_VERSION",
                    "description": "蓝盾流水线中CodeCC插件的版本"
                },
                "BK_CODECC_PIPELINE_IMAGE_TYPE":{
                    "form": true,
                    "type": "string",
                    "title": "BK_CODECC_PIPELINE_IMAGE_TYPE",
                    "enum": [
                        "BKDEVOPS",
                        "BKSTORE",
                        "THIRD"
                    ]
                },
                "BK_CODECC_PIPELINE_SCM_IS_OLD_SVN":{
                    "form": true,
                    "type": "boolean",
                    "title": "BK_CODECC_PIPELINE_SCM_IS_OLD_SVN"
                },
                "BK_CODECC_PIPELINE_SCM_IS_OLD_GITHUB":{
                    "form": true,
                    "type": "boolean",
                    "title": "BK_CODECC_PIPELINE_SCM_IS_OLD_GITHUB"
                },
                "BK_CODECC_TASK_ANALYSIS_MAX_HOUR":{
                    "form": true,
                    "type": "integer",
                    "title": "BK_CODECC_TASK_ANALYSIS_MAX_HOUR",
                    "description": "任务分析的最大时间, 单位小时"
                },
                "BK_CI_ENV":{
                    "form": true,
                    "type": "string",
                    "title": "BK_CI_ENV"
                },
                "BK_HTTP_SCHEMA":{
                    "form": true,
                    "type": "string",
                    "title": "BK_HTTP_SCHEMA"
                },
                "BK_PAAS_FQDN":{
                    "form": true,
                    "type": "string",
                    "title": "BK_PAAS_FQDN"
                },
                "BK_PAAS_HTTPS_PORT":{
                    "form": true,
                    "type": "integer",
                    "title": "BK_PAAS_HTTPS_PORT"
                },
                "BK_CODECC_PAAS_LOGIN_URL":{
                    "form": true,
                    "type": "string",
                    "title": "BK_CODECC_PAAS_LOGIN_URL"
                },
                "BK_CODECC_GATEWAY_CORS_ALLOW_LIST":{
                    "form": true,
                    "type": "string",
                    "title": "BK_CODECC_GATEWAY_CORS_ALLOW_LIST"
                },
                "BK_CI_IAM_ENV":{
                    "form": true,
                    "type": "string",
                    "title": "BK_CI_IAM_ENV"
                },
                "BK_SSM_HOST":{
                    "form": true,
                    "type": "string",
                    "title": "BK_SSM_HOST"
                },
                "BK_SSM_PORT":{
                    "form": true,
                    "type": "integer",
                    "title": "BK_SSM_PORT"
                },
                "BK_CI_GATEWAY_SSM_TOKEN_URL":{
                    "form": true,
                    "type": "string",
                    "title": "BK_CI_GATEWAY_SSM_TOKEN_URL"
                },
                "BK_CI_APP_CODE":{
                    "form": true,
                    "type": "string",
                    "title": "BK_CI_APP_CODE"
                },
                "BK_CI_APP_TOKEN":{
                    "form": true,
                    "type": "string",
                    "title": "BK_CI_APP_TOKEN"
                },
                "BK_CODECC_GATEWAY_REGION_NAME":{
                    "form": true,
                    "type": "string",
                    "title": "BK_CODECC_GATEWAY_REGION_NAME"
                },
                "BK_CI_PROJECT_INNER_URL":{
                    "form": true,
                    "type": "string",
                    "title": "用于设置蓝盾Codecc入口的蓝盾ProjectURL"
                }
            }
        },
        "mongodb": {
            "type": "object",
            "title": "Mongo配置",
            "form": true,
            "properties": {
                "enabled": {
                    "type": "boolean",
                    "title": "是否部署Mongo服务",
                    "form": true
                },
                "auth": {
                    "type": "object",
                    "title": "Mongo初始认证配置 - init开启时生效",
                    "form": true,
                    "properties": {
                        "rootPassword": {
                            "form": true,
                            "type": "string",
                            "title": "mongo.auth.rootPassword"
                        },
                        "username": {
                            "form": true,
                            "type": "string",
                            "title": "mongo.auth.username"
                        },
                        "password": {
                            "form": true,
                            "type": "string",
                            "title": "mongo.auth.password"
                        }
                    }
                }
            }
        },
        "init": {
            "type": "object",
            "title": "初始化配置",
            "form": true,
            "properties": {
                "mongodb": {
                    "type": "object",
                    "properties": {
                        "enabled": {
                            "type": "boolean",
                            "title": "是否部署Mongo初始化",
                            "form": true
                        }
                    }
                },
                "entrance": {
                    "type": "object",
                    "properties": {
                        "enabled": {
                            "type": "boolean",
                            "title": "是否部署蓝盾入口初始化",
                            "form": true
                        }
                    }
                }
            }
        },
        "externalMongodb": {
            "type": "object",
            "title": "外部Mongo配置 - init不开启时生效",
            "form": true,
            "properties": {
                "defectUrl": {
                    "form": true,
                    "type": "string",
                    "title": "externalMongodb.defectUrl"
                },
                "taskUrl": {
                    "form": true,
                    "type": "string",
                    "title": "externalMongodb.taskUrl"
                },
                "quartzUrl": {
                    "form": true,
                    "type": "string",
                    "title": "externalMongodb.quartzUrl"
                }
            }
        },
        "redis": {
            "type": "object",
            "title": "Redis配置",
            "form": true,
            "properties": {
                "enabled": {
                    "type": "boolean",
                    "title": "是否部署Redis服务",
                    "form": true
                },
                "auth": {
                    "type": "object",
                    "title": "Redis初始认证配置 - enabled开启时生效",
                    "form": true,
                    "properties": {
                        "password": {
                            "form": true,
                            "type": "string",
                            "title": "redis.auth.password"
                        }
                    }
                }
            }
        },
        "externalRedis": {
            "type": "object",
            "title": "外部Reids配置 - redis.enabled不开启时生效",
            "form": true,
            "properties": {
                "host": {
                    "form": true,
                    "type": "string",
                    "title": "externalRedis.host"
                },
                "password": {
                    "form": true,
                    "type": "string",
                    "title": "externalRedis.password"
                },
                "port": {
                    "form": true,
                    "type": "integer",
                    "title": "externalRedis.port"
                }
            }
        },
        "rabbitmq": {
            "type": "object",
            "title": "Rabbitmq配置",
            "form": true,
            "properties": {
                "enabled": {
                    "type": "boolean",
                    "title": "是否部署Rabbitmq服务",
                    "form": true
                },
                "auth": {
                    "type": "object",
                    "title": "Rabbitmq初始认证配置 - enabled开启时生效",
                    "form": true,
                    "properties": {
                        "password": {
                            "form": true,
                            "type": "string",
                            "title": "rabbitmq.auth.password"
                        },
                        "username": {
                            "form": true,
                            "type": "string",
                            "title": "rabbitmq.auth.username"
                        }
                    }
                }
            }
        },
        "externalRabbitmq": {
            "type": "object",
            "title": "外部Rabbitmq配置 - rabbitmq.enabled不开启时生效",
            "form": true,
            "properties": {
                "host": {
                    "form": true,
                    "type": "string",
                    "title": "externalRabbitmq.host"
                },
                "password": {
                    "form": true,
                    "type": "string",
                    "title": "externalRabbitmq.password"
                },
                "username": {
                    "form": true,
                    "type": "string",
                    "title": "externalRabbitmq.username"
                },
                "virtualhost": {
                    "form": true,
                    "type": "string",
                    "title": "externalRabbitmq.virtualhost"
                }
            }
        }
    }
}